<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>JS_learning</title>
</head>
<body>
	JS_learning
</body>
	<script>
	
	let money, time;

	function start() {
		money = +prompt("Ваш бюджет на месяц?", "");
		time = prompt("Введите дату в формате YYYY-MM-DD", "");

		while(isNaN(money) || money == "" || money == null) {
			money = +prompt("Ваш бюджет на месяц?", "");
		}
	}
	start();

	let appData = {
	  budget: money,
	  timeData: time,
	  expenses: {},
	  optionalExpenses: {},
	  income: [],
	  savings: true
	};

	function chooseExpenses() {
		for (let i=0; i<2; i++) {
			let nesExpense = prompt("Введите обязательную статью расходов в этом месяце"),
				nesExpenseMoney = +prompt("Во сколько обойдется?");

			if (typeof(nesExpense) === "string" && typeof(nesExpense) != null && typeof(nesExpenseMoney) != null && nesExpense.length < 10 && nesExpense != "" && nesExpenseMoney != "") {
				appData.expenses[nesExpense] = nesExpenseMoney;
			} else {
				--i;
			};
		};
	}
	chooseExpenses();

	function detectDayBudget() {
		appData.budgetPerDay = (appData.budget/30).toFixed();
		alert("Ежедневный доход: " + appData.budgetPerDay);
	}
	detectDayBudget();

	function detectLevel() {
		if (appData.budgetPerDay < 100 && appData.budgetPerDay > 0) {
			console.log("Низкий уровень дохода");
		} else if (appData.budgetPerDay > 100 && appData.budgetPerDay < 200) {
			console.log("Средний уровень дохода");
		} else if (appData.budgetPerDay > 200) {
			console.log("Высокий уровень дохода");
		} else {
			console.log("Ошибка");
		}	
	}
	detectLevel();

	function checkSavings() {
		if (appData.savings == true) {
			let save = +prompt("Какова сумма накоплений?"),
				percent = +prompt("Под какой процент?");

			appData.monthIncome = save/100/12*percent;
			alert("Доход в месяц с Вашего депозита: " + appData.monthIncome)
		}
	}
	checkSavings();

	function chooseOptExpenses() {
		for (let i = 1; i < 4; i++) {
			let optExpense = prompt("Статья необязательных расходов #" + i + "?", "");
			appData.optionalExpenses[i] = optExpense;
		}
	}
	chooseOptExpenses();

	</script>

</html>